<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>

  <canvas id="canvas" width="350" height="350"></canvas>
<div id="status"></div><br>
<div id="color" style="width:30px;height:30px;"></div>
<p>
Move the mouse over the BUS !
</p>


<script>
  var canvas = document.getElementById("canvas");

function getElementPosition(obj) {
    var curleft = 0, curtop = 0;
    if (obj.offsetParent) {
        do {
            curleft += obj.offsetLeft;
            curtop += obj.offsetTop;
        } while (obj = obj.offsetParent);
        return { x: curleft, y: curtop };
    }
    return undefined;
}

function getEventLocation(element,event){
		var pos = getElementPosition(element);
    
    return {
    		x: (event.pageX - pos.x),
      	y: (event.pageY - pos.y)
    };
}

function rgbToHex(r, g, b) {
    if (r > 255 || g > 255 || b > 255)
        throw "Invalid color component";
    return ((r << 16) | (g << 8) | b).toString(16);
}

function drawImageFromWebUrl(sourceurl){
      var img = new Image();

      img.addEventListener("load", function () {
          // The image can be drawn from any source
          canvas.getContext("2d").drawImage(img, 0, 0, img.width,    img.height, 0, 0, canvas.width, canvas.height);
          
      });

      img.setAttribute("src", sourceurl);
}
// Draw a base64 image because this is a fiddle, and if we try with an image from URL we'll get tainted canvas error
// Read more about here : http://ourcodeworld.com/articles/read/182/the-canvas-has-been-tainted-by-cross-origin-data-and-tainted-canvases-may-not-be-exported
drawImageFromWebUrl("data:image/png;base64,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");

canvas.addEventListener("mousemove",function(e){
	  var eventLocation = getEventLocation(this,e);
    var coord = "x=" + eventLocation.x + ", y=" + eventLocation.y;
    
    // Get the data of the pixel according to the location generate by the getEventLocation function
    var context = this.getContext('2d');
    var pixelData = context.getImageData(eventLocation.x, eventLocation.y, 1, 1).data; 

    // If transparency on the image
    if((pixelData[0] == 0) && (pixelData[1] == 0) && (pixelData[2] == 0) && (pixelData[3] == 0)){
 				coord += " (Transparent color detected, cannot be converted to HEX)";
    }
    
    var hex = "#" + ("000000" + rgbToHex(pixelData[0], pixelData[1], pixelData[2])).slice(-6);
    
    // Draw the color and coordinates.
    document.getElementById("status").innerHTML = coord;
    document.getElementById("color").style.backgroundColor = hex;
},false);
</script>
  
</body>
</html>